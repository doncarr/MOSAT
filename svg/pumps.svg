<!--
Auto generated file DO NOT EDIT
Generated by: gen_display.cpp
-->
<!--  START insert svg header -->
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     width="100%" height="100%" viewBox="0 0 300 150" onload="load()">

  <title>panel test</title>
  <metadata>author: Don Carr</metadata>
<!--  END insert svg header -->
<!--  START insert background color -->
<rect fill="burlywood" x="0%" y="0%" width="100%" height="100%" stroke="none" stroke-width="0"/>
<!--  END insert background color -->
<!--  START insert for pump (001) -->
<path fill="lime" stroke="black" stroke-width="0.100000"
  d="M10.000000,20.000000 A10.000000,10.000000 0 1,0 16.000000,10.834849 L16.000000,8.000000 L10.000000,8.000000 Z"/>
<circle cx="20.000000" cy="20.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (001) -->
<!--  START insert for pump (002) -->
<path fill="red" stroke="black" stroke-width="0.100000"
transform="rotate(90 20.000000,50.000000)"
  d="M10.000000,50.000000 A10.000000,10.000000 0 1,0 16.000000,40.834849 L16.000000,38.000000 L10.000000,38.000000 Z"/>
<circle cx="20.000000" cy="50.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (002) -->
<!--  START insert for pump (003) -->
<path fill="blue" stroke="black" stroke-width="0.100000"
transform="rotate(180 20.000000,80.000000)"
  d="M10.000000,80.000000 A10.000000,10.000000 0 1,0 16.000000,70.834849 L16.000000,68.000000 L10.000000,68.000000 Z"/>
<circle cx="20.000000" cy="80.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (003) -->
<!--  START insert for pump (004) -->
<path fill="magenta" stroke="black" stroke-width="0.100000"
transform="rotate(270 20.000000,120.000000)"
  d="M10.000000,120.000000 A10.000000,10.000000 0 1,0 16.000000,110.834849 L16.000000,108.000000 L10.000000,108.000000 Z"/>
<circle cx="20.000000" cy="120.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (004) -->
<!--  START insert for pump (005) -->
<path fill="orange" stroke="black" stroke-width="0.100000"
  d="M70.000000,20.000000 A10.000000,10.000000 0 1,1 64.000000,10.834849 L64.000000,8.000000 L70.000000,8.000000 Z"/>
<circle cx="60.000000" cy="20.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (005) -->
<!--  START insert for pump (006) -->
<path fill="yellow" stroke="black" stroke-width="0.100000"
transform="rotate(90 60.000000,50.000000)"
  d="M70.000000,50.000000 A10.000000,10.000000 0 1,1 64.000000,40.834849 L64.000000,38.000000 L70.000000,38.000000 Z"/>
<circle cx="60.000000" cy="50.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (006) -->
<!--  START insert for pump (007) -->
<path fill="cyan" stroke="black" stroke-width="0.100000"
transform="rotate(180 60.000000,80.000000)"
  d="M70.000000,80.000000 A10.000000,10.000000 0 1,1 64.000000,70.834849 L64.000000,68.000000 L70.000000,68.000000 Z"/>
<circle cx="60.000000" cy="80.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (007) -->
<!--  START insert for pump (008) -->
<path fill="bisque" stroke="black" stroke-width="0.100000"
transform="rotate(270 60.000000,120.000000)"
  d="M70.000000,120.000000 A10.000000,10.000000 0 1,1 64.000000,110.834849 L64.000000,108.000000 L70.000000,108.000000 Z"/>
<circle cx="60.000000" cy="120.000000" r="3.000000" stroke="black" stroke-width="0.100000" fill="none"/>
<!--  END insert for pump (008) -->
<!--  START insert for valve (001) -->
<g id="group_object" fill="lime" >
  <path  stroke="black" stroke-width="0.200000" 
          d="M104.000000,14.000000 A2.000000,1.200000 0 1,1 116.000000,14.000000 Z"/>
  <polygon points="100.000000,14.000000 100.000000,30.000000 110.000000,22.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="120.000000,14.000000 120.000000,30.000000 110.000000,22.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="110.000000" y1="14.000000" x2="110.000000" y2="22.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (001) -->
<!--  START insert for valve (002) -->
<g id="group_object" fill="red" transform="rotate(90 110.000000,52.000000)">
  <path  stroke="black" stroke-width="0.200000" 
          d="M104.000000,44.000000 A2.000000,1.200000 0 1,1 116.000000,44.000000 Z"/>
  <polygon points="100.000000,44.000000 100.000000,60.000000 110.000000,52.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="120.000000,44.000000 120.000000,60.000000 110.000000,52.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="110.000000" y1="44.000000" x2="110.000000" y2="52.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (002) -->
<!--  START insert for valve (003) -->
<g id="group_object" fill="blue" transform="rotate(180 110.000000,82.000000)">
  <path  stroke="black" stroke-width="0.200000" 
          d="M104.000000,74.000000 A2.000000,1.200000 0 1,1 116.000000,74.000000 Z"/>
  <polygon points="100.000000,74.000000 100.000000,90.000000 110.000000,82.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="120.000000,74.000000 120.000000,90.000000 110.000000,82.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="110.000000" y1="74.000000" x2="110.000000" y2="82.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (003) -->
<!--  START insert for valve (004) -->
<g id="group_object" fill="magenta" transform="rotate(270 110.000000,122.000000)">
  <path  stroke="black" stroke-width="0.200000" 
          d="M104.000000,114.000000 A2.000000,1.200000 0 1,1 116.000000,114.000000 Z"/>
  <polygon points="100.000000,114.000000 100.000000,130.000000 110.000000,122.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="120.000000,114.000000 120.000000,130.000000 110.000000,122.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="110.000000" y1="114.000000" x2="110.000000" y2="122.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (004) -->
<!--  START insert for valve (005) -->
<g id="group_object" fill="orange" >
  <rect x="154.000000" y="10.000000" width="12.000000" height="4.000000"
      stroke="black" stroke-width="0.200000"/>
  <polygon points="150.000000,14.000000 150.000000,30.000000 160.000000,22.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="170.000000,14.000000 170.000000,30.000000 160.000000,22.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="160.000000" y1="14.000000" x2="160.000000" y2="22.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (005) -->
<!--  START insert for valve (006) -->
<g id="group_object" fill="yellow" transform="rotate(90 160.000000,52.000000)">
  <rect x="154.000000" y="40.000000" width="12.000000" height="4.000000"
      stroke="black" stroke-width="0.200000"/>
  <polygon points="150.000000,44.000000 150.000000,60.000000 160.000000,52.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="170.000000,44.000000 170.000000,60.000000 160.000000,52.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="160.000000" y1="44.000000" x2="160.000000" y2="52.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (006) -->
<!--  START insert for valve (007) -->
<g id="group_object" fill="cyan" transform="rotate(180 160.000000,82.000000)">
  <rect x="154.000000" y="70.000000" width="12.000000" height="4.000000"
      stroke="black" stroke-width="0.200000"/>
  <polygon points="150.000000,74.000000 150.000000,90.000000 160.000000,82.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="170.000000,74.000000 170.000000,90.000000 160.000000,82.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="160.000000" y1="74.000000" x2="160.000000" y2="82.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (007) -->
<!--  START insert for valve (008) -->
<g id="group_object" fill="bisque" transform="rotate(270 160.000000,122.000000)">
  <rect x="154.000000" y="110.000000" width="12.000000" height="4.000000"
      stroke="black" stroke-width="0.200000"/>
  <polygon points="150.000000,114.000000 150.000000,130.000000 160.000000,122.000000" 
    stroke="black" stroke-width="0.200000"/>
  <polygon points="170.000000,114.000000 170.000000,130.000000 160.000000,122.000000" 
     stroke="black" stroke-width="0.200000"/>
  <line x1="160.000000" y1="114.000000" x2="160.000000" y2="122.000000" 
     stroke ="black" stroke-width="1"/>
</g>
<!--  END insert for valve (008) -->
<script type="text/ecmascript"><![CDATA[
const svgNS = "http://www.w3.org/2000/svg";
// -- START insert js library: sim_pump.js
var sim;

    function pump_1_timeout()
    {
      sim.toggle_pump1();
    };

    function pump_2_timeout()
    {
      sim.toggle_pump2();
    };

    function pump_3_timeout()
    {
      sim.toggle_pump3();
    };

function sim_object_t()
{
  this.lo_level=89;
  this.hi_level=270;
  this.hi_hi_level=325;
  this.rate=0;
  this.up=true;

  this.pv =
  {
    "LEVEL":100,
    "PUMP1_AMP":0,
    "PUMP2_AMP":0,
    "PUMP3_AMP":0,
    "PUMP1_ON":true,
    "PUMP2_ON":true,
    "PUMP3_ON":true,
    "HI_HI_LEVEL":false,
    "HI_LEVEL":false,
    "LO_LEVEL":true
  }

  this.cfg =
  {
    "LEVEL":{"tag":"LEVEL","description":"NIVEL","eu":"cm","driver":0,"card":0,"channel":2,"eu_lo":0.000000,"eu_hi":500.000000,"raw_lo":32000.000000,"raw_hi":6400.000000,"decimal_places":0,"zero_cutoff":-125.000000,"lo_alarm":15.0,"lo_caution":44.0,"hi_caution":300.0,"hi_alarm":380.0,"deadband":0.0,"lo_alarm_enable":true,"lo_caution_enable":true,"hi_caution_enable":true,"hi_alarm_enable":true, "scale_lo":0,"scale_hi":450},
    "PUMP1_AMP":{"tag":"PUMP1_AMP","description":"BOMBA 1","eu":"amps","driver":0,"card":0,"channel":5,"eu_lo":0.000000,"eu_hi":50.000000,"raw_lo":6400.000000,"raw_hi":32000.000000,"decimal_places":1,"zero_cutoff":-12.500000,"lo_alarm":0.000000,"lo_caution":0.000000,"hi_caution":30.000000,"hi_alarm":35.000000,"deadband":0.000000,"lo_alarm_enable":false,"lo_caution_enable":false,"hi_caution_enable":true,"hi_alarm_enable":true,"scale_lo":0,"scale_hi":40},
    "PUMP2_AMP":{"tag":"PUMP2_AMP","description":"BOMBA 2","eu":"amps","driver":0,"card":0,"channel":4,"eu_lo":0.000000,"eu_hi":50.000000,"raw_lo":6400.000000,"raw_hi":32000.000000,"decimal_places":1,"zero_cutoff":-12.500000,"lo_alarm":0.000000,"lo_caution":0.000000,"hi_caution":30.000000,"hi_alarm":35.000000,"deadband":0.000000,"lo_alarm_enable":false,"lo_caution_enable":false,"hi_caution_enable":true,"hi_alarm_enable":true,"scale_lo":0,"scale_hi":40},
    "PUMP3_AMP":{"tag":"PUMP3_AMP","description":"BOMBA 3","eu":"amps","driver":0,"card":0,"channel":3,"eu_lo":0.000000,"eu_hi":50.000000,"raw_lo":6400.000000,"raw_hi":32000.000000,"decimal_places":1,"zero_cutoff":-12.500000,"lo_alarm":0.000000,"lo_caution":0.000000,"hi_caution":30.000000,"hi_alarm":35.000000,"deadband":0.000000,"lo_alarm_enable":false,"lo_caution_enable":false,"hi_caution_enable":true,"hi_alarm_enable":true,"scale_lo":0,"scale_hi":40},
    "PUMP1_ON": {"tag":"PUMP1_ON","description":"Bomba 1 ON","driver":0,"card":0,"channel":8, "lo_desc":"Off","hi_desc":"ON", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
    "PUMP2_ON":{"tag":"PUMP2_ON","description":"Bomba 1 ON","driver":0,"card":0,"channel":9, "lo_desc":"Off","hi_desc":"ON", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
    "PUMP3_ON":{"tag":"PUMP3_ON","description":"Bomba 1 ON","driver":0,"card":0,"channel":10, "lo_desc":"Off","hi_desc":"ON", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
    "HI_HI_LEVEL":{"tag":"HI_HI_LEVEL","description":"Nivel Muy Alto","driver":0,"card":1,"channel":2, "lo_desc":"BELOW","hi_desc":"ABOVE", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
    "HI_LEVEL":{"tag":"HI_LEVEL","description":"Nivel Alto","driver":0,"card":1,"channel":1, "lo_desc":"BELOW","hi_desc":"ABOVE", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
    "LO_LEVEL":{"tag":"LO_LEVEL","description":"Nivel Bajo","driver":0,"card":1,"channel":0, "lo_desc":"BELOW","hi_desc":"ABOVE", "alarm_state":"NONE","shutdown_state":"NONE","invert_pv":false},
  }
} 

function sim_object_init_f(val)
{

}
sim_object_t.prototype.init=sim_object_init_f;

function toggle_pump2_f(val)
{
  this.pv.PUMP2_ON = !this.pv.PUMP2_ON
  console.log("Toggle pump 2 to:", this.pv.PUMP2_ON);
}
sim_object_t.prototype.toggle_pump2=toggle_pump2_f;

function toggle_pump3_f(val)
{
  this.pv.PUMP3_ON = !this.pv.PUMP3_ON
  console.log("Toggle pump 3 to:", this.pv.PUMP3_ON);
}
sim_object_t.prototype.toggle_pump3=toggle_pump3_f;

function toggle_pump1_f(val)
{
  this.pv.PUMP1_ON = !this.pv.PUMP1_ON
  console.log("Toggle pump 1 to:", this.pv.PUMP1_ON);
}

sim_object_t.prototype.toggle_pump1=toggle_pump1_f;

function sim_object_get_cfg_f(tag)
{
  console.log("getting config for: " + tag);
  var the_val = this.cfg[tag.toUpperCase()];
  console.log("cfg value: " + the_val);
  return the_val;
}
sim_object_t.prototype.get_cfg=sim_object_get_cfg_f;

function sim_object_get_pv_f(tag)
{
  //console.log("getting PV for: " + tag);
  var the_val = this.pv[tag.toUpperCase()];
  //console.log("PV: " + the_val);
  return the_val;
}
sim_object_t.prototype.get_pv=sim_object_get_pv_f;

    function sim_object_update_f()
    {
      if (this.up)
      {
        if (this.pv.LEVEL > (this.lo_level+2)) this.pv.LO_LEVEL=true;
        if (this.pv.LEVEL > (this.hi_level+1))
        { 
          this.up=false;
          this.pv.HI_LEVEL=true;
          setTimeout("pump_1_timeout()", 1000);
          setTimeout("pump_2_timeout()", 4000);
          setTimeout("pump_3_timeout()", 7000);
        }
        if (this.pv.LEVEL > (this.hi_hi_level+2)) this.pv.HI_HI_LEVEL=true;
      }
      else
      {
        if (this.pv.LEVEL < (this.lo_level-1)) 
        {
          this.up=true;
          this.pv.LO_LEVEL=false;
          setTimeout("pump_3_timeout()", 1000);
          setTimeout("pump_2_timeout()", 4000);
          setTimeout("pump_1_timeout()", 7000);
        }
        if (this.pv.LEVEL < (this.hi_level-3)) this.pv.HI_LEVEL=false;
        if (this.pv.LEVEL < (this.hi_hi_level-3)) this.pv.HI_HI_LEVEL=false;
      }
      this.rate=10.0;
      if (!this.pv.PUMP1_ON) 
      {
        this.rate -= 6.0;
        this.pv.PUMP1_AMP= (27 +((Math.random()-0.5)*0.6));
      }
      else
      {
        this.pv.PUMP1_AMP= (0 +((Math.random()-0.5)*0.6));
      }

      if (!this.pv.PUMP2_ON) 
      {
        this.rate -= 6.0;
        this.pv.PUMP2_AMP= (27 +((Math.random()-0.5)*0.6));
      }
      else
      {
        this.pv.PUMP2_AMP= (0 +((Math.random()-0.5)*0.6));
      }

      if (!this.pv.PUMP3_ON)
      {
        this.rate -= 6.0;
        this.pv.PUMP3_AMP= (27 +((Math.random()-0.5)*0.6));
      }
      else
      {
        this.pv.PUMP3_AMP= (0 +((Math.random()-0.5)*0.6));
      }
      this.rate = this.rate * 1.5;
      this.pv.LEVEL+=this.rate*0.1;
      this.pv.LEVEL= ((this.pv.LEVEL+((Math.random()-0.5)*0.8)));
    }
    sim_object_t.prototype.update=sim_object_update_f;

sim = new sim_object_t;

// -- END insert js library: sim_pump.js
// -- START insert simulation code --
var update_objs = new Array();
var update_tags = new Array();
function update_objects()
{
  for (var i=0; i < update_objs.length; i++)
  {
    update_objs[i].update(sim.get_pv(update_tags[i]));
  }
}

function config_objects()
{
  for (var i=0; i < update_objs.length; i++)
  {
    update_objs[i].init(sim.get_cfg(update_tags[i]));
  }
}

function intervalHandler()
{
  sim.update();
  update_objects();
}

function load()
{
  config_objects();
  update_objects();
  var interval = setInterval("intervalHandler()", 100);
};

// -- END insert simulation code --
]]></script>
</svg>
